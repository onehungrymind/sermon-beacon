<div class="searchbar-component">
  <form [formGroup]="form" #formDirective="ngForm" (submit)="search()" class="d-flex justify-content-center w-100 mt-3">
    <mat-form-field appearance="legacy" floatLabel="never" [class]="isMobile ? 'w-100' : 'w-50'">
      <!-- Input -->
      <input matInput type="text" placeholder="Search..." class="fs-22 py-3 pr-2" formControlName="searchQuery" />
      <!-- Date Picker -->
      <input [matDatepicker]="picker" type="hidden">
      <mat-datepicker #picker></mat-datepicker>
      <!-- Menu -->
      <div matSuffix class="d-flex base-text cursor-pointer">
        <span class="align-self-center fs-14 medium-text">Sermon {{form.get('searchType').value | titlecase}}</span>
        <button mat-icon-button type="button" class="fs-22" #matMenuTrigger="matMenuTrigger"
          [matMenuTriggerFor]="menu" (click)="matMenuTrigger.openMenu()">
          <mat-icon>keyboard_arrow_down</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item *ngFor="let category of categoryOptions; index as i;"
            (click)="selectCustom(category.name, i)">
            {{category.name | titlecase}}
            <mat-icon *ngIf="category.icon">
              {{category.icon}}
            </mat-icon>
          </button>
        </mat-menu>
        <button mat-icon-button type="submit" class="fs-22" (click)="$event.stopImmediatePropagation()">
          <mat-icon>search</mat-icon>
        </button>
        <button mat-icon-button class="fs-22" (click)="clear(formDirective); $event.stopImmediatePropagation()">
          <mat-icon>clear</mat-icon>
        </button>
      </div>
    </mat-form-field>
  </form>
</div>
